import{S as be,i as Ee,s as ke,e as g,t as C,k as j,c as _,a as m,g as T,d,n as P,b as n,f as z,D as r,h as ye,O as Se,F as je,I as de,J as Pe,j as Oe,m as Ue,P as K,o as Fe,E as ee,Q as Me,N as Ie,x as Be,u as Ge,v as We,R as He,A as Je}from"../chunks/vendor-f40b56c0.js";import{g as qe}from"../chunks/navigation-51f4a605.js";import{_ as ze}from"../chunks/preload-helper-ec9aa979.js";import{C as Ke,r as Qe,c as Xe,b as Ye,p as Ze}from"../chunks/login-96f3aec9.js";import{d as Ce}from"../chunks/displayError-0ab9c496.js";import"../chunks/singletons-12a22614.js";async function xe(o){return ze(()=>import("../chunks/main-13e0cc77.js").then(function(s){return s.m}),[]).then(s=>s.default(o))}function Te(o,s,e){const a=o.slice();return a[8]=s[e],a}function Re(o){let s,e,a,u,l=o[7].suggestions,t=[];for(let i=0;i<l.length;i+=1)t[i]=Ve(Te(o,l,i));let c=o[7].warning!==""&&De(o);return{c(){s=g("div"),e=C(`Suggestions:
      `),a=g("ul");for(let i=0;i<t.length;i+=1)t[i].c();u=j(),c&&c.c(),this.h()},l(i){s=_(i,"DIV",{class:!0});var h=m(s);e=T(h,`Suggestions:
      `),a=_(h,"UL",{class:!0});var f=m(a);for(let p=0;p<t.length;p+=1)t[p].l(f);f.forEach(d),u=P(h),c&&c.l(h),h.forEach(d),this.h()},h(){n(a,"class","list-disc block overflow-hidden break-words w-100 svelte-3gj6vw"),n(s,"class","mt-3 svelte-3gj6vw")},m(i,h){z(i,s,h),r(s,e),r(s,a);for(let f=0;f<t.length;f+=1)t[f].m(a,null);r(s,u),c&&c.m(s,null)},p(i,h){if(h&128){l=i[7].suggestions;let f;for(f=0;f<l.length;f+=1){const p=Te(i,l,f);t[f]?t[f].p(p,h):(t[f]=Ve(p),t[f].c(),t[f].m(a,null))}for(;f<t.length;f+=1)t[f].d(1);t.length=l.length}i[7].warning!==""?c?c.p(i,h):(c=De(i),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},d(i){i&&d(s),Se(t,i),c&&c.d()}}}function Ve(o){let s,e=o[8]+"",a;return{c(){s=g("li"),a=C(e),this.h()},l(u){s=_(u,"LI",{class:!0});var l=m(s);a=T(l,e),l.forEach(d),this.h()},h(){n(s,"class","ml-10 svelte-3gj6vw")},m(u,l){z(u,s,l),r(s,a)},p(u,l){l&128&&e!==(e=u[8]+"")&&ye(a,e)},d(u){u&&d(s)}}}function De(o){let s,e,a=o[7].warning+"",u;return{c(){s=g("p"),e=C("WARNING: "),u=C(a),this.h()},l(l){s=_(l,"P",{class:!0});var t=m(s);e=T(t,"WARNING: "),u=T(t,a),t.forEach(d),this.h()},h(){n(s,"class","font-bold svelte-3gj6vw")},m(l,t){z(l,s,t),r(s,e),r(s,u)},p(l,t){t&128&&a!==(a=l[7].warning+"")&&ye(u,a)},d(l){l&&d(s)}}}function Ae(o){let s,e;return{c(){s=g("p"),e=C("Password does not match."),this.h()},l(a){s=_(a,"P",{class:!0});var u=m(s);e=T(u,"Password does not match."),u.forEach(d),this.h()},h(){n(s,"class","text-red-600 font-bold svelte-3gj6vw")},m(a,u){z(a,s,u),r(s,e)},d(a){a&&d(s)}}}function $e(o){let s,e,a,u,l,t,c,i,h,f,p,L,I,y,S,F,R,O,A,N,M,k=o[7]&&(o[7].suggestions.length!==0||o[7].warning!=="")&&Re(o),w=o[0]!==o[1]&&Ae();return{c(){s=g("div"),e=g("h3"),a=C("Password strength:"),u=j(),l=g("div"),t=g("div"),i=j(),h=g("div"),p=j(),L=g("div"),y=j(),S=g("div"),R=j(),O=g("div"),N=j(),k&&k.c(),M=j(),w&&w.c(),this.h()},l(b){s=_(b,"DIV",{class:!0});var v=m(s);e=_(v,"H3",{class:!0});var J=m(e);a=T(J,"Password strength:"),J.forEach(d),u=P(v),l=_(v,"DIV",{class:!0});var V=m(l);t=_(V,"DIV",{class:!0}),m(t).forEach(d),i=P(V),h=_(V,"DIV",{class:!0}),m(h).forEach(d),p=P(V),L=_(V,"DIV",{class:!0}),m(L).forEach(d),y=P(V),S=_(V,"DIV",{class:!0}),m(S).forEach(d),R=P(V),O=_(V,"DIV",{class:!0}),m(O).forEach(d),V.forEach(d),N=P(v),k&&k.l(v),M=P(v),w&&w.l(v),v.forEach(d),this.h()},h(){n(e,"class","mb-3 svelte-3gj6vw"),n(t,"class",c=""+(o[2]+" bar svelte-3gj6vw")),n(h,"class",f=""+(o[3]+" bar svelte-3gj6vw")),n(L,"class",I=""+(o[4]+" bar svelte-3gj6vw")),n(S,"class",F=""+(o[5]+" bar svelte-3gj6vw")),n(O,"class",A=""+(o[6]+" bar svelte-3gj6vw")),n(l,"class","h-2 w-full flex gap-2 svelte-3gj6vw"),n(s,"class","border shadow rounded p-3 bg-light-50 overflow-hidden break-words svelte-3gj6vw")},m(b,v){z(b,s,v),r(s,e),r(e,a),r(s,u),r(s,l),r(l,t),r(l,i),r(l,h),r(l,p),r(l,L),r(l,y),r(l,S),r(l,R),r(l,O),r(s,N),k&&k.m(s,null),r(s,M),w&&w.m(s,null)},p(b,[v]){v&4&&c!==(c=""+(b[2]+" bar svelte-3gj6vw"))&&n(t,"class",c),v&8&&f!==(f=""+(b[3]+" bar svelte-3gj6vw"))&&n(h,"class",f),v&16&&I!==(I=""+(b[4]+" bar svelte-3gj6vw"))&&n(L,"class",I),v&32&&F!==(F=""+(b[5]+" bar svelte-3gj6vw"))&&n(S,"class",F),v&64&&A!==(A=""+(b[6]+" bar svelte-3gj6vw"))&&n(O,"class",A),b[7]&&(b[7].suggestions.length!==0||b[7].warning!=="")?k?k.p(b,v):(k=Re(b),k.c(),k.m(s,M)):k&&(k.d(1),k=null),b[0]!==b[1]?w||(w=Ae(),w.c(),w.m(s,null)):w&&(w.d(1),w=null)},i:je,o:je,d(b){b&&d(s),k&&k.d(),w&&w.d()}}}function es(o,s,e){let{password:a}=s,{passwordConfirm:u}=s,l="",t="",c="",i="",h="",f;return o.$$set=p=>{"password"in p&&e(0,a=p.password),"passwordConfirm"in p&&e(1,u=p.passwordConfirm)},o.$$.update=()=>{o.$$.dirty&1&&(async()=>{if(a&&a!==""){const p=await xe(a);switch(e(7,f=p.feedback),p.score){case 0:e(2,l="week"),e(3,t=""),e(4,c=""),e(5,i=""),e(6,h="");break;case 1:e(2,l="bad"),e(3,t="bad"),e(4,c=""),e(5,i=""),e(6,h="");break;case 2:e(2,l="decent"),e(3,t="decent"),e(4,c="decent"),e(5,i=""),e(6,h="");break;case 3:e(2,l="good"),e(3,t="good"),e(4,c="good"),e(5,i="good"),e(6,h="");break;case 4:e(2,l="strong"),e(3,t="strong"),e(4,c="strong"),e(5,i="strong"),e(6,h="strong");break}}else e(2,l=""),e(3,t=""),e(4,c=""),e(5,i=""),e(6,h=""),e(7,f=void 0)})()},[a,u,l,t,c,i,h,f]}class ss extends be{constructor(s){super();Ee(this,s,es,$e,ke,{password:0,passwordConfirm:1})}}async function ts(o,s){const{manager:e,keys:a}=await Ke.createUser(s),u=fetch(Qe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwt:o,keys:a})}),{res:l,ok:t,message:c}=await Xe(u);if(!t)return Ce(c),Promise.reject(c);const i=await l.json();await Ye(i.username,e)}function rs(o){let s,e,a,u,l,t,c,i,h,f,p,L,I,y,S,F,R,O,A,N,M,k,w,b,v,J,V,se,W,Q,te,re,le,B,ae,H,oe,ne,ie,q,X,ce,he;function Le(E){o[8](E)}function Ne(E){o[9](E)}let ue={};return o[1]!==void 0&&(ue.password=o[1]),o[2]!==void 0&&(ue.passwordConfirm=o[2]),v=new ss({props:ue}),de.push(()=>Pe(v,"password",Le)),de.push(()=>Pe(v,"passwordConfirm",Ne)),{c(){s=g("div"),e=g("form"),a=g("h3"),u=C("Register"),l=j(),t=g("div"),c=g("div"),i=g("label"),h=C("Token:"),f=j(),p=g("input"),L=j(),I=g("div"),y=g("label"),S=C("Password:"),F=j(),R=g("input"),O=j(),A=g("div"),N=g("label"),M=C("Confirm Password:"),k=j(),w=g("input"),b=j(),Oe(v.$$.fragment),se=j(),W=g("p"),Q=g("strong"),te=C("IMPORTANT:"),re=C(` If you forget your password your files will be
        LOST FOREVER. Use a password manager!`),le=j(),B=g("p"),ae=C(`Already have an account?
        `),H=g("a"),oe=C("Login here"),ne=C("."),ie=j(),q=g("input"),this.h()},l(E){s=_(E,"DIV",{class:!0});var U=m(s);e=_(U,"FORM",{action:!0,autocomplete:!0,class:!0});var G=m(e);a=_(G,"H3",{class:!0});var pe=m(a);u=T(pe,"Register"),pe.forEach(d),l=P(G),t=_(G,"DIV",{class:!0});var D=m(t);c=_(D,"DIV",{class:!0});var Y=m(c);i=_(Y,"LABEL",{for:!0,class:!0});var ge=m(i);h=T(ge,"Token:"),ge.forEach(d),f=P(Y),p=_(Y,"INPUT",{type:!0,name:!0,placeholder:!0}),Y.forEach(d),L=P(D),I=_(D,"DIV",{class:!0});var Z=m(I);y=_(Z,"LABEL",{for:!0,class:!0});var _e=m(y);S=T(_e,"Password:"),_e.forEach(d),F=P(Z),R=_(Z,"INPUT",{type:!0,name:!0,placeholder:!0}),Z.forEach(d),O=P(D),A=_(D,"DIV",{class:!0});var x=m(A);N=_(x,"LABEL",{for:!0,class:!0});var ve=m(N);M=T(ve,"Confirm Password:"),ve.forEach(d),k=P(x),w=_(x,"INPUT",{type:!0,name:!0,placeholder:!0}),x.forEach(d),b=P(D),Ue(v.$$.fragment,D),se=P(D),W=_(D,"P",{class:!0});var fe=m(W);Q=_(fe,"STRONG",{});var me=m(Q);te=T(me,"IMPORTANT:"),me.forEach(d),re=T(fe,` If you forget your password your files will be
        LOST FOREVER. Use a password manager!`),fe.forEach(d),le=P(D),B=_(D,"P",{class:!0});var $=m(B);ae=T($,`Already have an account?
        `),H=_($,"A",{class:!0,href:!0});var we=m(H);oe=T(we,"Login here"),we.forEach(d),ne=T($,"."),$.forEach(d),ie=P(D),q=_(D,"INPUT",{type:!0,class:!0}),D.forEach(d),G.forEach(d),U.forEach(d),this.h()},h(){n(a,"class","text-3xl mb-10 svelte-66sab"),n(i,"for","token"),n(i,"class","svelte-66sab"),n(p,"type","text"),n(p,"name","token"),n(p,"placeholder","Token"),n(c,"class","mt-3 svelte-66sab"),n(y,"for","password"),n(y,"class","svelte-66sab"),n(R,"type","password"),n(R,"name","password"),n(R,"placeholder","Password"),n(I,"class","mt-3 svelte-66sab"),n(N,"for","password-confirm"),n(N,"class","svelte-66sab"),n(w,"type","password"),n(w,"name","password-confirm"),n(w,"placeholder","Confirm Password"),n(A,"class","my-3 svelte-66sab"),n(W,"class","mt-3 overflow-hidden break-words w-100 svelte-66sab"),n(H,"class","text-blue-600 underline svelte-66sab"),n(H,"href","/login"),n(B,"class","py-4 svelte-66sab"),n(q,"type","submit"),q.value="Register",n(q,"class","btn-good-light cursor-pointer svelte-66sab"),n(t,"class","flex flex-col svelte-66sab"),n(e,"action","/api/login"),n(e,"autocomplete","off"),n(e,"class","border border-gray-300 inline-block rounded shadow-md bg-gray-50 px-20 py-10 svelte-66sab"),n(s,"class","flex justify-center items-center h-screen svelte-66sab")},m(E,U){z(E,s,U),r(s,e),r(e,a),r(a,u),r(e,l),r(e,t),r(t,c),r(c,i),r(i,h),r(c,f),r(c,p),K(p,o[0]),r(t,L),r(t,I),r(I,y),r(y,S),r(I,F),r(I,R),K(R,o[1]),r(t,O),r(t,A),r(A,N),r(N,M),r(A,k),r(A,w),K(w,o[2]),r(t,b),Fe(v,t,null),r(t,se),r(t,W),r(W,Q),r(Q,te),r(W,re),r(t,le),r(t,B),r(B,ae),r(B,H),r(H,oe),r(B,ne),r(t,ie),r(t,q),o[10](e),X=!0,ce||(he=[ee(p,"input",o[5]),ee(R,"input",o[6]),ee(w,"input",o[7]),ee(e,"submit",Me(o[4]))],ce=!0)},p(E,[U]){U&1&&p.value!==E[0]&&K(p,E[0]),U&2&&R.value!==E[1]&&K(R,E[1]),U&4&&w.value!==E[2]&&K(w,E[2]);const G={};!J&&U&2&&(J=!0,G.password=E[1],Ie(()=>J=!1)),!V&&U&4&&(V=!0,G.passwordConfirm=E[2],Ie(()=>V=!1)),v.$set(G)},i(E){X||(Be(v.$$.fragment,E),X=!0)},o(E){Ge(v.$$.fragment,E),X=!1},d(E){E&&d(s),We(v),o[10](null),ce=!1,He(he)}}}function ls(o,s,e){let a="",u="",l="",t;async function c(){if(u!==l){t.reset(),Ce("The password does not match");return}await ts(a,u),await qe("/a")}Je(Ze);function i(){a=this.value,e(0,a)}function h(){u=this.value,e(1,u)}function f(){l=this.value,e(2,l)}function p(y){u=y,e(1,u)}function L(y){l=y,e(2,l)}function I(y){de[y?"unshift":"push"](()=>{t=y,e(3,t)})}return[a,u,l,t,c,i,h,f,p,L,I]}class fs extends be{constructor(s){super();Ee(this,s,ls,rs,ke,{})}}export{fs as default};
